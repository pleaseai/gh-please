#!/usr/bin/env bash
set -e

# GitHub CLI extension for gh-please
# This script launches the Bun-based TypeScript application

# Check if bun is available
if ! type -p bun >/dev/null; then
  echo "❌ Error: bun is not installed or not in PATH" >&2
  echo "   Install bun from https://bun.sh" >&2
  exit 1
fi

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Check if compiled version exists, otherwise run from source
if [ -f "$SCRIPT_DIR/dist/index.js" ]; then
  exec bun "$SCRIPT_DIR/dist/index.js" "$@"
else
  # Development mode: run from source
  exec bun "$SCRIPT_DIR/src/index.ts" "$@"
fi
